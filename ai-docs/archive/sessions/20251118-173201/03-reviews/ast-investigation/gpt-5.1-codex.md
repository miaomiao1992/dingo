Investigation complete. Root cause: the switch statement replacement discarded its `Init` node, so temporary match bindings (e.g., `__match_0 := result`) were never reinserted, leaving the if/else chain without the required scoped initializer. Proposed fix: wrap the transformation in a `*ast.BlockStmt` that first emits the original `switch.Init` (when non-nil) followed by the synthesized if/else chain, ensuring the initializer’s scope and ordering stay intact. Risks: altering scope could leak identifiers if the block isn’t emitted exactly once, and tuple/guard handling must still attach to the correct branch nodes. Testing plan: rerun all 13 pattern match golden tests plus focused transformer unit tests covering switches with/without init statements. Full details: `ai-docs/sessions/20251118-223310/output/analysis.md`.
