package main

import "errors"

enum Result {
	Ok(string),
	Err(error),
}

func fetchUser(id int) Result {
	if id <= 0 {
		return ResultErr(errors.New("invalid user ID"))
	}
	return ResultOk("User" + string(rune(id)))
}

func validateUser(name string) Result {
	if name == "" {
		return ResultErr(errors.New("empty user name"))
	}
	return ResultOk(name)
}

func processUser(id int) Result {
	user := fetchUser(id)
	match user {
		Ok(u) => {
			validated := validateUser(u)
			match validated {
				Ok(v) => return ResultOk(v),
				Err(e) => return ResultErr(e)
			}
		},
		Err(e) => return ResultErr(e)
	}
}

func main() {
	result := processUser(42)
	match result {
		Ok(user) => println("Success:", user),
		Err(error) => println("Error:", error)
	}
}
