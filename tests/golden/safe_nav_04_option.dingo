package main

// Test: Safe navigation with Option types only
// Feature: Safe Navigation (?.) - Option Type Support
// Complexity: intermediate

enum UserOption {
	Some(User),
	None,
}

enum ProfileOption {
	Some(Profile),
	None,
}

enum StringOption {
	Some(string),
	None,
}

type User struct {
	id      int
	profile ProfileOption
}

type Profile struct {
	bio   StringOption
	email string
}

func fetchUser(id int) UserOption {
	if id == 1 {
		bio := StringOptionSome("Software Engineer")
		prof := ProfileOptionSome(Profile{bio: bio, email: "alice@example.com"})
		return UserOptionSome(User{id: 1, profile: prof})
	}
	return UserOptionNone()
}

func main() {
	// Test 1: Full Option chain
	user := fetchUser(1)
	bio := user?.profile?.bio
	println("Bio:", bio)

	// Test 2: None propagation
	noUser := fetchUser(0)
	noBio := noUser?.profile?.bio
	println("No Bio:", noBio)

	// Test 3: Intermediate None
	partialUser := UserOptionSome(User{id: 2, profile: ProfileOptionNone()})
	partialBio := partialUser?.profile?.bio
	println("Partial Bio:", partialBio)
}
