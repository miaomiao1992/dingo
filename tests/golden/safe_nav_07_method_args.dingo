package main

// Test: Method calls with arguments using safe navigation operator
// Feature: Safe Navigation (?.) - Method Arguments
// Complexity: intermediate

enum UserOption {
	Some(User),
	None,
}

enum StringOption {
	Some(string),
	None,
}

enum IntOption {
	Some(int),
	None,
}

type User struct {
	name string
}

func (u User) format(prefix string, suffix string) StringOption {
	result := prefix + u.name + suffix
	return StringOptionSome(result)
}

func (u User) process(count int, flag bool, msg string) IntOption {
	if flag {
		return IntOptionSome(count * 2)
	}
	return IntOptionNone()
}

func (u User) transform(data string) StringOption {
	return StringOptionSome(data + ":" + u.name)
}

func getUser(id int) UserOption {
	if id > 0 {
		return UserOptionSome(User{name: "Alice"})
	}
	return UserOptionNone()
}

func getData() string {
	return "payload"
}

func main() {
	user := getUser(1)

	// Method with two string arguments
	formatted := user?.format("Hello ", "!")
	println(formatted)

	// Method with multiple argument types
	result := user?.process(42, true, "test")
	println(result)

	// Method with function call as argument
	transformed := user?.transform(getData())
	println(transformed)

	// Zero arguments
	name := user?.getName()
	println(name)
}

func (u User) getName() StringOption {
	return StringOptionSome(u.name)
}
