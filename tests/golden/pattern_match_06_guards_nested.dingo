package main

// Test: Guards with 'where' keyword (Swift-style)
// Feature: Swift-style 'where' guards with complex boolean expressions
// Complexity: intermediate
// Limitation: where guards with NESTED patterns not yet supported

enum Option {
	Some(int),
	None,
}

enum Result {
	Ok(int),
	Err(error),
}

// Using 'where' keyword (Swift-style)
func analyzeValue(opt Option) string {
	return match opt {
		Option_Some(x) where x > 100 => "large",
		Option_Some(x) where x > 10 => "medium",
		Option_Some(x) where x > 0 => "small",
		Option_Some(_) => "non-positive",
		Option_None => "none",
	}
}

// Simple pattern with where guards (NOT nested)
func processResult(result Result) string {
	return match result {
		Result_Ok(val) where val > 100 => "large value",
		Result_Ok(val) where val > 0 => "positive value",
		Result_Ok(_) => "non-positive value",
		Result_Err(_) => "error",
	}
}

// Guard fallthrough demonstration
func categorize(opt Option) string {
	return match opt {
		Option_Some(x) where x%3 == 0 && x%5 == 0 => "fizzbuzz",
		Option_Some(x) where x%3 == 0 => "fizz",
		Option_Some(x) where x%5 == 0 => "buzz",
		Option_Some(x) => "number",
		Option_None => "empty",
	}
}

func main() {
	println(analyzeValue(Option_Some(150)))
	println(processResult(Result_Ok(42)))
	println(categorize(Option_Some(15)))
}
