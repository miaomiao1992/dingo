package main

type UserOptionTag uint8

const (
	UserOptionTagSome UserOptionTag = iota
	UserOptionTagNone
)

type UserOption struct {
	tag  UserOptionTag
	some *User
}

func UserOptionSome(arg0 User) UserOption {
	return UserOption{tag: UserOptionTagSome, some: &arg0}
}
func UserOptionNone() UserOption {
	return UserOption{tag: UserOptionTagNone}
}
func (e UserOption) IsSome() bool {
	return e.tag == UserOptionTagSome
}
func (e UserOption) IsNone() bool {
	return e.tag == UserOptionTagNone
}

type AddressOptionTag uint8

const (
	AddressOptionTagSome AddressOptionTag = iota
	AddressOptionTagNone
)

type AddressOption struct {
	tag  AddressOptionTag
	some *Address
}
func AddressOptionSome(arg0 Address) AddressOption {
	return AddressOption{tag: AddressOptionTagSome, some: &arg0}
}
func AddressOptionNone() AddressOption {
	return AddressOption{tag: AddressOptionTagNone}
}
func (e AddressOption) IsSome() bool {
	return e.tag == AddressOptionTagSome
}
func (e AddressOption) IsNone() bool {
	return e.tag == AddressOptionTagNone
}

type User struct {
	name    string
	address AddressOption
}
type Address struct {
	city string
}
func getUser(id int) UserOption {
	if id > 0 {
		addr := AddressOptionSome(Address{city: "Boston"})
		return UserOptionSome(User{name: "Alice", address: addr})
	}
	return UserOptionNone()
}
func main() {
	user := getUser(1)

	city := __SAFE_NAV_INFER__(user, "address", "city")
	println(city)
}
