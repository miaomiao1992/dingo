package main

import (
	"errors"
)

type ResultTag uint8

const (
	ResultTag_Ok ResultTag = iota
	ResultTag_Err
)

type Result struct {
	tag   ResultTag
	ok_0  *string
	err_0 *error
}

func Result_Ok(arg0 string) Result {
	return Result{tag: ResultTag_Ok, ok_0: &arg0}
}
func Result_Err(arg0 error) Result {
	return Result{tag: ResultTag_Err, err_0: &arg0}
}
func (e Result) IsOk() bool {
	return e.tag == ResultTag_Ok
}
func (e Result) IsErr() bool {
	return e.tag == ResultTag_Err
}
func fetchUser(id int) Result {
	if id <= 0 {
		return Result_Err(errors.New("invalid user ID"))
	}
	return Result_Ok("User" + string(rune(id)))
}
func validateUser(name string) Result {
	if name == "" {
		return Result_Err(errors.New("empty user name"))
	}
	return Result_Ok(name)
}
func processUser(id int) Result {
	user := fetchUser(id)

	__match_0 := user
	switch __match_0.tag {
	case ResultTagOk:

		u := *__match_0.ok_0
		validated := validateUser(u)

		__match_0 := validated
		switch __match_0.tag {
		case ResultTagOk:

			v := *__match_0.ok_0
			return Result_Ok(v)
		case ResultTagErr:

			e := __match_0.err_0
			return Result_Err(e)
		}

	case ResultTagErr:

		e := __match_0.err_0
		return Result_Err(e)
	}

}
func main() {
	result := processUser(42)

	__match_1 := result
	switch __match_1.tag {
	case ResultTagOk:

		user := *__match_1.ok_0
		println("Success:", user)
	case ResultTagErr:

		error := __match_1.err_0
		println("Error:", error)
	}

}
