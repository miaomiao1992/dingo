package main

type UserOptionTag uint8

const (
	UserOptionTagSome UserOptionTag = iota
	UserOptionTagNone
)

type UserOption struct {
	tag  UserOptionTag
	some *User
}

func UserOptionSome(arg0 User) UserOption {
	return UserOption{tag: UserOptionTagSome, some: &arg0}
}
func UserOptionNone() UserOption {
	return UserOption{tag: UserOptionTagNone}
}
func (e UserOption) IsSome() bool {
	return e.tag == UserOptionTagSome
}
func (e UserOption) IsNone() bool {
	return e.tag == UserOptionTagNone
}

type StringOptionTag uint8

const (
	StringOptionTagSome StringOptionTag = iota
	StringOptionTagNone
)

type StringOption struct {
	tag  StringOptionTag
	some *string
}
func StringOptionSome(arg0 string) StringOption {
	return StringOption{tag: StringOptionTagSome, some: &arg0}
}
func StringOptionNone() StringOption {
	return StringOption{tag: StringOptionTagNone}
}
func (e StringOption) IsSome() bool {
	return e.tag == StringOptionTagSome
}
func (e StringOption) IsNone() bool {
	return e.tag == StringOptionTagNone
}

type User struct {
	name  string
	email string
}
func (u User) getName() string {
	return u.name
}
func (u User) getEmail() StringOption {
	if u.email != "" {
		return StringOptionSome(u.email)
	}
	return StringOptionNone()
}
func getUser(id int) UserOption {
	if id > 0 {
		return UserOptionSome(User{name: "Alice", email: "alice@example.com"})
	}
	return UserOptionNone()
}
func main() {
	user := getUser(1)

	name := __SAFE_NAV_INFER__(user, "getName()")
	println(name)

	email := __SAFE_NAV_INFER__(user, "getEmail()")
	println(email)
}
