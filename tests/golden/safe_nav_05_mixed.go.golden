package main

type UserOptionTag uint8

const (
	UserOptionTagSome UserOptionTag = iota
	UserOptionTagNone
)

type UserOption struct {
	tag  UserOptionTag
	some *User
}

func UserOptionSome(arg0 User) UserOption {
	return UserOption{tag: UserOptionTagSome, some: &arg0}
}
func UserOptionNone() UserOption {
	return UserOption{tag: UserOptionTagNone}
}
func (e UserOption) IsSome() bool {
	return e.tag == UserOptionTagSome
}
func (e UserOption) IsNone() bool {
	return e.tag == UserOptionTagNone
}

type SettingsOptionTag uint8

const (
	SettingsOptionTagSome SettingsOptionTag = iota
	SettingsOptionTagNone
)

type SettingsOption struct {
	tag  SettingsOptionTag
	some *Settings
}
func SettingsOptionSome(arg0 Settings) SettingsOption {
	return SettingsOption{tag: SettingsOptionTagSome, some: &arg0}
}
func SettingsOptionNone() SettingsOption {
	return SettingsOption{tag: SettingsOptionTagNone}
}
func (e SettingsOption) IsSome() bool {
	return e.tag == SettingsOptionTagSome
}
func (e SettingsOption) IsNone() bool {
	return e.tag == SettingsOptionTagNone
}

type User struct {
	name     string
	config   *Config
	settings SettingsOption
}
type Config struct {
	theme *Theme
}
type Theme struct {
	color string
}
type Settings struct {
	lang     string
	timezone *Timezone
}
type Timezone struct {
	offset int
}
func getUser(id int) UserOption {
	if id == 1 {
		tz := &Timezone{offset: -5}
		settings := SettingsOptionSome(Settings{lang: "en", timezone: tz})
		theme := &Theme{color: "dark"}
		config := &Config{theme: theme}
		return UserOptionSome(User{name: "Charlie", config: config, settings: settings})
	}
	return UserOptionNone()
}
func main() {

	user := getUser(1)
	color := __SAFE_NAV_INFER__(user, "config", "theme", "color")
	println("Theme:", color)

	offset := __SAFE_NAV_INFER__(user, "settings", "timezone", "offset")
	println("Timezone:", offset)

	noUser := getUser(0)
	noColor := __SAFE_NAV_INFER__(noUser, "config", "theme", "color")
	println("No Theme:", noColor)
}
