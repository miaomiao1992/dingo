package main

type UserOptionTag uint8

const (
	UserOptionTagSome UserOptionTag = iota
	UserOptionTagNone
)

type UserOption struct {
	tag  UserOptionTag
	some *User
}

func UserOptionSome(arg0 User) UserOption {
	return UserOption{tag: UserOptionTagSome, some: &arg0}
}
func UserOptionNone() UserOption {
	return UserOption{tag: UserOptionTagNone}
}
func (e UserOption) IsSome() bool {
	return e.tag == UserOptionTagSome
}
func (e UserOption) IsNone() bool {
	return e.tag == UserOptionTagNone
}

type ProfileOptionTag uint8

const (
	ProfileOptionTagSome ProfileOptionTag = iota
	ProfileOptionTagNone
)

type ProfileOption struct {
	tag  ProfileOptionTag
	some *Profile
}
func ProfileOptionSome(arg0 Profile) ProfileOption {
	return ProfileOption{tag: ProfileOptionTagSome, some: &arg0}
}
func ProfileOptionNone() ProfileOption {
	return ProfileOption{tag: ProfileOptionTagNone}
}
func (e ProfileOption) IsSome() bool {
	return e.tag == ProfileOptionTagSome
}
func (e ProfileOption) IsNone() bool {
	return e.tag == ProfileOptionTagNone
}

type StringOptionTag uint8

const (
	StringOptionTagSome StringOptionTag = iota
	StringOptionTagNone
)

type StringOption struct {
	tag  StringOptionTag
	some *string
}
func StringOptionSome(arg0 string) StringOption {
	return StringOption{tag: StringOptionTagSome, some: &arg0}
}
func StringOptionNone() StringOption {
	return StringOption{tag: StringOptionTagNone}
}
func (e StringOption) IsSome() bool {
	return e.tag == StringOptionTagSome
}
func (e StringOption) IsNone() bool {
	return e.tag == StringOptionTagNone
}

type User struct {
	id      int
	profile ProfileOption
}
type Profile struct {
	bio   StringOption
	email string
}
func fetchUser(id int) UserOption {
	if id == 1 {
		bio := StringOptionSome("Software Engineer")
		prof := ProfileOptionSome(Profile{bio: bio, email: "alice@example.com"})
		return UserOptionSome(User{id: 1, profile: prof})
	}
	return UserOptionNone()
}
func main() {

	user := fetchUser(1)
	bio := __SAFE_NAV_INFER__(user, "profile", "bio")
	println("Bio:", bio)

	noUser := fetchUser(0)
	noBio := __SAFE_NAV_INFER__(noUser, "profile", "bio")
	println("No Bio:", noBio)

	partialUser := UserOptionSome(User{id: 2, profile: ProfileOptionNone()})
	partialBio := __SAFE_NAV_INFER__(partialUser, "profile", "bio")
	println("Partial Bio:", partialBio)
}
