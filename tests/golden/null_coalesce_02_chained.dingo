package main

// Test: Chained null coalescing (single IIFE optimization)
// Feature: Null coalescing with multiple fallbacks
// Complexity: intermediate

enum StringOption {
	Some(string),
	None,
}

func main() {
	// Test 1: Chain of Option values (a ?? b ?? c)
	let firstName: StringOption = StringOptionNone()
	let middleName: StringOption = StringOptionNone()
	let lastName: StringOption = StringOptionSome("Smith")

	// Chained null coalescing - try each in order
	let name = firstName ?? middleName ?? lastName ?? "Unknown"

	// Test 2: Chain with function calls
	let primary = getConfig("primary")
	let fallback = getConfig("fallback")
	let config = primary ?? fallback ?? "default"

	// Test 3: Long chain
	let opt1: StringOption = StringOptionNone()
	let opt2: StringOption = StringOptionNone()
	let opt3: StringOption = StringOptionNone()
	let opt4: StringOption = StringOptionSome("Found")
	let result = opt1 ?? opt2 ?? opt3 ?? opt4 ?? "Not Found"

	println("Name:", name)
	println("Config:", config)
	println("Result:", result)
}

func getConfig(key string) StringOption {
	if key == "fallback" {
		return StringOptionSome("backup-value")
	}
	return StringOptionNone()
}
