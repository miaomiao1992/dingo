package main

// Test: Mixed Option and pointer chains
// Feature: Safe Navigation (?.) - Mixed Type Support
// Complexity: advanced

enum UserOption {
	Some(User),
	None,
}

enum SettingsOption {
	Some(Settings),
	None,
}

type User struct {
	name     string
	config   *Config
	settings SettingsOption
}

type Config struct {
	theme *Theme
}

type Theme struct {
	color string
}

type Settings struct {
	lang     string
	timezone *Timezone
}

type Timezone struct {
	offset int
}

func getUser(id int) UserOption {
	if id == 1 {
		tz := &Timezone{offset: -5}
		settings := SettingsOption_Some(Settings{lang: "en", timezone: tz})
		theme := &Theme{color: "dark"}
		config := &Config{theme: theme}
		return UserOption_Some(User{name: "Charlie", config: config, settings: settings})
	}
	return UserOption_None()
}

func main() {
	// Test 1: Option -> Pointer chain
	user := getUser(1)
	color := user?.config?.theme?.color
	println("Theme:", color)

	// Test 2: Option -> Option -> Pointer chain
	offset := user?.settings?.timezone?.offset
	println("Timezone:", offset)

	// Test 3: None in mixed chain
	noUser := getUser(0)
	noColor := noUser?.config?.theme?.color
	println("No Theme:", noColor)
}
